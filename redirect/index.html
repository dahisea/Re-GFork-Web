<!doctype html><html lang="zh-TW"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>腳本連結安全重定向驗證中</title><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3758644447684310" crossorigin="anonymous"></script><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.7.2/css/all.min.css"><style>
:root {
--primary: #4361ee;
--success: #4cc9f0;
--error: #f72585;
--warning: #f8961e;
--dark: #212529;
--light: #f8f9fa;
--gray: #6c757d;
--transition: all 0.3s ease;
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
background-color: #f5f5f5;
color: var(--dark);
line-height: 1.6;
padding: 0;
margin: 0;
min-height: 100vh;
display: flex;
flex-direction: column;
}

/* 主容器 */
.main-container {
width: 100%;
max-width: 800px;
margin: 0 auto;
padding: 20px;
flex: 1;
display: flex;
flex-direction: column;
}

/* 廣告容器 */
.ad-slot {
width: 100%;
margin: 10px 0;
text-align: center;
}

/* 內容容器 */
#redirect-container {
width: 100%;
flex: 1;
}

/* 狀態卡片樣式 */
.status-card {
background: white;
border-radius: 12px;
padding: 30px;
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
text-align: center;
transition: var(--transition);
animation: fadeIn 0.5s ease;
margin: 10px 0;
}

.status-card:hover {
transform: translateY(-5px);
box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
}

.icon-spin {
font-size: 3.5rem;
margin-bottom: 20px;
animation: spin 1.5s linear infinite;
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

@keyframes spin {
from { transform: rotate(0deg); }
to { transform: rotate(360deg); }
}

@media (max-width: 768px) {
.main-container {
padding: 10px;
}
}
</style></head><body><div class="main-container"><!-- 頂部廣告 --><div class="ad-slot"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3758644447684310" data-ad-slot="4095096984" data-ad-format="auto" data-full-width-responsive="true"></ins><script>
 (adsbygoogle = window.adsbygoogle || []).push({});
</script></div><!-- 主內容 --><div id="redirect-container"><div class="status-card waiting"><div class="icon-spin"><i class="fas fa-sync-alt"></i></div><h2>安全驗證初始化</h2><p>正在檢查重定向連結安全性...</p></div></div><!-- 底部廣告 --><div class="ad-slot"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3758644447684310" data-ad-slot="4095096984" data-ad-format="auto" data-full-width-responsive="true"></ins><script>
 (adsbygoogle = window.adsbygoogle || []).push({});
</script><br><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3758644447684310" data-ad-slot="4095096984" data-ad-format="auto" data-full-width-responsive="true"></ins><script>
 (adsbygoogle = window.adsbygoogle || []).push({});
</script><br><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3758644447684310" data-ad-slot="4095096984" data-ad-format="auto" data-full-width-responsive="true"></ins><script>
 (adsbygoogle = window.adsbygoogle || []).push({});
</script><br><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3758644447684310" data-ad-slot="4095096984" data-ad-format="auto" data-full-width-responsive="true"></ins><script>
 (adsbygoogle = window.adsbygoogle || []).push({});
</script><br><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3758644447684310" data-ad-slot="4095096984" data-ad-format="auto" data-full-width-responsive="true"></ins><script>
 (adsbygoogle = window.adsbygoogle || []).push({});
</script></div></div><script>
window.onload = function() {
const allowedDomain = 'https://update.greasyfork.org.cn/';
const targetContainerId = 'redirect-container';
const hash = window.location.hash;

if (hash === "#google_vignette") {
showErrorMessage("連結已失效", "此連結已過期或不可用");
return;
}

if (!hash || !(hash.startsWith("#http://") || hash.startsWith("#https://"))) {
showWaitingMessage();
startAutoRefresh();
return;
}

const targetUrl = hash.substring(1);
const finalUrl = targetUrl + window.location.search;

if (targetUrl.startsWith(allowedDomain)) {
document.getElementById(targetContainerId).innerHTML = createSuccessCard(finalUrl);

const meta = document.createElement("meta");
meta.httpEquiv = "refresh";
meta.content = "0; url=" + finalUrl;
document.head.appendChild(meta);
} else {
showErrorMessage("安全限制", `僅允許跳轉至 ${allowedDomain} 的連結`);
}
};

function startAutoRefresh() {
setTimeout(() => {
location.reload();
}, 3000);
}

function showWaitingMessage() {
const container = document.getElementById('redirect-container');
if (!container) return;

container.innerHTML = `
<div class="status-card waiting">
<div class="icon-spin">
<i class="fas fa-sync-alt"></i>
</div>
<h2>正在等待有效連結</h2>
<p>系統正在自動檢查中，請稍候...</p>
<div class="tips">
<i class="fas fa-lightbulb"></i> 提示：若長時間停留在此頁面，請重新進入安裝頁
</div>
</div>
`;
}

function showErrorMessage(title, message) {
const container = document.getElementById('redirect-container');
if (!container) return;

container.innerHTML = `
<div class="status-card error">
<div class="icon">
<i class="fas fa-exclamation-triangle"></i>
</div>
<h2>${title}</h2>
<p>${message}</p>
<div class="actions">
<button onclick="location.reload()" class="btn">
<i class="fas fa-sync-alt"></i> 重新載入
</button>
<button onclick="history.back()" class="btn outline">
<i class="fas fa-arrow-left"></i> 返回上一頁
</button>
</div>
</div>
`;
}

function createSuccessCard(url) {
return `
<div class="status-card success">
<div class="icon">
<i class="fas fa-check-circle"></i>
</div>
<h2>安全驗證通過</h2>
<p>即將為您自動跳轉至安全連結</p>
<div class="url-display">
<i class="fas fa-link"></i>
<span>${url}</span>
</div>
<div class="countdown">
<span>1</span> 秒後自動跳轉...
</div>
<div class="actions">
<a href="${url}" class="btn" rel="noopener noreferrer">
<i class="fas fa-external-link-alt"></i> 立即前往
</a>
</div>
</div>
`;
}
</script></body></html>